在bash中, 有着很多快捷键, 而其中大部分来自readline.
如果你的Ctrl和Alt键很方便按的话, 我推荐你接着往下看,
或许会使你在bash上编辑效率得到一个很高的提升呢?

下文中将会使用`C-x`来描述`Ctrl+x`, `M-x`来描述`Alt+x`, `M-C-x`来描述`Ctrl+Alt+x`,
`C-x C-u`来描述`Ctrl+x Ctrl+u`, `a, b`描述a键或者b键, 这点与bash手册将一致.

# 入门快捷键

- `C-a`, `C-e`: 这将是`Home`键和`End`键的替代品, 不必将手离开主输入区

- `C-b`, `C-f`: 这将是左右方向键的替代品, 可以流畅的在字符间移动

- `M-0`, `M-1` ... `M-9`, `M--`:
  这些键可以开启一个重复序列, 之后可以按下一些数字键,
  将会为接下来的一个键添加计数, 例如普通字符就是重复输入n次.

   例如你想输入一百个x: `M-1 0 0 x`
- `C-t`, `M-t`: 这两个键分别会将光标两侧的两个字符或者两个词进行交换,
  有时打快了例如`ls`打成了`sl`, 可以考虑应用这个键而不是退格再打

- `C-h`, `C-d`: 相当于退格和Del键

- 输入序列重合:

  由于终端会将组合键转换成一系列序列输入, 而有些组合键和常用的键的序列直接重合,
  所以我们可以直接将其当做快捷键使用.

  **以下是一个常用的列表**
  | 组合键 | 常用键 |
  | ---    | ---    |
  | `C-i`  | `Tab`  |
  | `C-m`  | `回车` |
  | `C-j`  | `换行` |

# 进阶快捷键

如果说上面是使用组合键代替常用功能键的话, 这些就是高效编辑必备的键

## 代码移动

- `M-b`, `M-f`: 这两个键可以在更小粒度的词上进行移动, 而不是空白分隔的词.

- `C-]`, `M-C-]`: 这两个键可以向后和向前直接跳转到接下来输入的一个字符处,
  就像vim的`f`和`F`键一样

- `C-x C-x`: 与上次标记点进行一次光标交换, 并将交换前光标位置设为标记点

- `C-@, M-<space>`: 设置一个标记点, 这个标记点容易被影响例如yank操作.
  可以使用数字参数将该标记设定在指定位置

- `C-x s`: 立马到达一个词的末尾而不是空白上或者词中间


## 代码修改

- `C-w`: 向前删除一个词, 并压至删除栈顶
- `M-d`: 向后删除一个小粒度词, 并压至删除栈顶
- `C-u`, `C-k`: 删除至首部或尾部, 并压至删除栈顶
- `C-y`: 将删除栈中yank指针处的目标输入, 当栈变化时yank指针被重置到栈顶
- `M-y`: 如果上一个键是`C-y`的话, 那么将尝试将yank指针下移并更新`C-y`键输入的词
- `C-x C-u, C-_`: 这可以撤销一次操作
- `M-r`: 这可以撤销对此行上的修改, 例如浏览历史记录时进行了修改
- `M-u`, `M-l`, `M-c`: 将光标处至一个小粒度词结束的字母改为大写/小写/首字母大写
- `M-\`: 删除光标两侧所有的空格及Tab


## 键盘宏

- `C-x (`: 开始一个宏录制
- `C-x )`: 结束一个宏录制
- `C-x e`: 调用一个宏


## 展开相关

- `C-x g`: 打印光标处的glob结果

- `C-x *`: 展开光标处的glob结果

- `M-^`: 展开历史, 历史展开相关可以参考`!`

- `M-C-e`: 展开别名、历史、变量、转义, 有时需要重新转义,
  还有运行替换和反引号替换还有算数扩展等, 注意小心被坑

- `M-&`: 展开光标处参数上的波浪号, 例如`~/.local`

- `M-{`: 以共享前缀形式生成包含路径下所有文件目录的展开(expand)


## 补全相关

- `M-?`: 列出当前可能的所有补全
- `M-*`: 插入当前可能的所有补全
- `M-/`: 尝试补全一个文件名
- `C-x /`: 列出文件名补全
- `M-~`: 尝试补全一个用户名
- `C-x ~`: 列出用户名补全
- 选项有些多, 以下略, 具体参考手册


## 一些不好分类的

- `M-#`: 回到行首并输入一个井号注释并结束这一行的输入.

  当然, 这需要注意是否存在换行,
  存在换行的话只能将其第一行注释并不假思索的执行接下来的行.

- `M-., M-_`: 插入上一个命令的最后一个参数, 连续使用可以查找跟之前的命令.

  可以加入参数如`M-2 M-.`来传入2获取第二个参数, 或者传入-1获取倒数第二个参数.

- `M-C-y`: 插入上一个命令的第一个参数, 传入参数和连续使用细节同`M-., M-_`

- `C-x C-e`: 使用编辑器打开当前正在编辑的行,
  并在退出时将编辑器保存到临时文件的内容执行

- `C-q, C-v`: 将紧随其后的一个键原样键入, 例如组合键, 可以利用`C-v C-j`键入换行

- `C-l`: 清除屏幕

- `M-C-l`: 清除显示

- `C-x C-r`: 重新加载 `inputrc` 文件


# 推荐配置

我们可以自行配置bash有但未被默认使用的功能, 其中一些可以极大的方便我们bash的使用

### 以下是推荐的配置
```inputrc
# 通过C-p键和上方向键进行前缀历史检索
"\e[A": history-search-backward
"\x10": history-search-backward

# 通过C-n键和下方向键进行前缀历史检索
"\e[B": history-search-forward
"\x0e": history-search-forward

# 使用 TAB 来循环补全项
Tab: menu-complete

# 反向循环
"\e[Z": menu-complete-backward

# 可以使用M-v键快速的完成打开编辑器而不是原本的C-x C-e
"\ev": edit-and-execute-command

# 考虑了bash转义字符的向前删除一个词, 例如使用字符串包裹或反斜杠转义的空格
"\ew": shell-backward-kill-word

# 考虑了bash转义字符的向后删除一个词
"\ee": shell-kill-word

# 考虑了bash转义字符的向前挪动一个词
"\eh": shell-backward-word

# 考虑了bash转义字符的向后挪动一个词
"\el": shell-forward-word

# 在屏幕显示的行中上下移动
"\ej": next-screen-line
"\ek": previous-screen-line


# 使用M-s键直接在行首插入sudo并移至行尾
"\es": "\eOHsudo \eOF"

# 按一次Tab就开始补全
set show-all-if-ambiguous on

# 路径补全进行上色
set colored-stats on

# 补全时显示最大通用前缀字符数
set completion-prefix-display-length 5

# 使用 tab 进行选择补全项时 先打印出补全列表 下一次才开始循环
set menu-complete-display-prefix on

# 补全时忽略大小写
#set completion-ignore-case on

```
可以将其写入用户级配置文件 `~/.inputrc` 中, 可以使用`C-x C-r`键使其立即生效
